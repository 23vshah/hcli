{
  "phy_chunks": {
    "main": {
      "id": "main",
      "type": "module",
      "children": [
        {
          "id": "imports",
          "type": "imports",
          "description": "import json, subprocess, pathlib.Path, and argparse modules",
          "line_range": [
            1,
            3
          ]
        },
        {
          "id": "function_generate_pyh_with_claude",
          "type": "function_definition",
          "signature": "function generate_pyh_with_claude(takes json_file, pyh_file, py_file)",
          "children": [
            {
              "id": "read_input_data",
              "type": "assignment",
              "description": "read the JSON file content into data variable",
              "line_range": [
                6,
                6
              ]
            },
            {
              "id": "construct_prompt",
              "type": "assignment",
              "description": "create a comprehensive prompt string with rules, examples, and the input data for Claude to convert Python AST JSON to .phy format",
              "line_range": [
                9,
                242
              ]
            },
            {
              "id": "call_claude",
              "type": "subprocess_call",
              "description": "execute Claude command with the prompt and capture the output",
              "line_range": [
                243,
                247
              ]
            },
            {
              "id": "extract_output",
              "type": "assignment",
              "description": "strip whitespace from the subprocess stdout result",
              "line_range": [
                249,
                249
              ]
            },
            {
              "id": "if1_block_abstract",
              "type": "if_else_block",
              "children": [
                {
                  "id": "if1_abstract",
                  "type": "if_statement",
                  "description": "clean up the output by removing markdown code block delimiters (```json or '''json)",
                  "line_range": [
                    251,
                    252
                  ]
                }
              ]
            },
            {
              "id": "if2_block_abstract",
              "type": "if_else_block",
              "children": [
                {
                  "id": "if2_abstract",
                  "type": "if_statement",
                  "description": "handle subprocess error by printing error message",
                  "line_range": [
                    256,
                    257
                  ]
                },
                {
                  "id": "else1_abstract",
                  "type": "else_statement",
                  "children": [
                    {
                      "id": "try_parse_json",
                      "type": "try_except_block",
                      "description": "attempt to parse Claude output as JSON, return early if parsing fails",
                      "line_range": [
                        259,
                        263
                      ]
                    },
                    {
                      "id": "resolve_ast_path",
                      "type": "assignment",
                      "description": "resolve the absolute path of the input JSON file",
                      "line_range": [
                        266,
                        266
                      ]
                    },
                    {
                      "id": "if3_block_abstract",
                      "type": "if_else_block",
                      "children": [
                        {
                          "id": "if3_abstract",
                          "type": "if_statement",
                          "description": "if file is in 'out' directory, reconstruct relative path and map to .py file, otherwise use fallback naming",
                          "line_range": [
                            267,
                            275
                          ]
                        }
                      ]
                    },
                    {
                      "id": "inject_metadata",
                      "type": "assignment",
                      "description": "add metadata with source python file path to the parsed JSON data",
                      "line_range": [
                        277,
                        279
                      ]
                    },
                    {
                      "id": "write_output_file",
                      "type": "file_write",
                      "description": "write the processed JSON data to the output .pyh file",
                      "line_range": [
                        281,
                        281
                      ]
                    },
                    {
                      "id": "print_success",
                      "type": "print_statement",
                      "description": "print success message with generated file path and metadata",
                      "line_range": [
                        282,
                        282
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "import_argparse",
          "type": "import",
          "description": "import argparse module",
          "line_range": [
            287,
            287
          ]
        },
        {
          "id": "if4_abstract",
          "type": "if_statement",
          "description": "main execution block: set up argument parser with input file, python file, and optional output arguments, determine output filename if not provided, and call the generation function",
          "line_range": [
            289,
            304
          ]
        }
      ]
    }
  },
  "metadata": {
    "source_py": "pyh_ast_generator.py"
  }
}