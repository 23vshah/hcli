{"ast":null,"code":"import React,{useState}from'react';import{Send,Loader,CheckCircle,XCircle,AlertTriangle}from'lucide-react';import{useStore}from'../hooks/useStore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubmitButton=()=>{const{editor,repository,applyChanges}=useStore();const[isSubmitting,setIsSubmitting]=useState(false);const[submitStatus,setSubmitStatus]=useState('idle');const[submitMessage,setSubmitMessage]=useState('');const handleSubmit=async()=>{if(!repository.selectedFile)return;setIsSubmitting(true);setSubmitStatus('idle');setSubmitMessage('Applying changes...');try{// Use the new applyChanges function from the store\nawait applyChanges(repository.selectedFile);setSubmitStatus('success');setSubmitMessage('Changes applied successfully!');// Reload the file to show updated content\nsetTimeout(()=>{window.location.reload();},2000);}catch(error){setSubmitStatus('error');setSubmitMessage(error instanceof Error?error.message:'Unknown error occurred');}finally{setIsSubmitting(false);}};const getButtonVariant=()=>{switch(submitStatus){case'success':return'bg-green-600 hover:bg-green-700 text-white';case'error':return'bg-red-600 hover:bg-red-700 text-white';case'warning':return'bg-yellow-600 hover:bg-yellow-700 text-white';default:return'bg-primary-600 hover:bg-primary-700 text-white';}};const getButtonIcon=()=>{if(isSubmitting){return/*#__PURE__*/_jsx(Loader,{className:\"h-4 w-4 animate-spin\"});}switch(submitStatus){case'success':return/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4\"});case'error':return/*#__PURE__*/_jsx(XCircle,{className:\"h-4 w-4\"});case'warning':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4\"});default:return/*#__PURE__*/_jsx(Send,{className:\"h-4 w-4\"});}};const getButtonText=()=>{if(isSubmitting)return'Applying Changes...';switch(submitStatus){case'success':return'Changes Applied Successfully';case'error':return'Apply Changes';case'warning':return'Apply Changes';default:return'Apply Changes';}};const isDisabled=!repository.selectedFile||editor.diffs.length===0||isSubmitting;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-t border-neutral-200 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,disabled:isDisabled,className:\"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed \".concat(getButtonVariant()),children:[getButtonIcon(),/*#__PURE__*/_jsx(\"span\",{children:getButtonText()})]}),editor.diffs.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-neutral-600\",children:[editor.diffs.length,\" change\",editor.diffs.length!==1?'s':'',\" pending\"]})]}),submitMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm px-3 py-1 rounded-md \".concat(submitStatus==='success'?'bg-green-50 text-green-700':submitStatus==='error'?'bg-red-50 text-red-700':submitStatus==='warning'?'bg-yellow-50 text-yellow-700':'bg-neutral-50 text-neutral-700'),children:submitMessage})]})});};export default SubmitButton;","map":{"version":3,"names":["React","useState","Send","Loader","CheckCircle","XCircle","AlertTriangle","useStore","jsx","_jsx","jsxs","_jsxs","SubmitButton","editor","repository","applyChanges","isSubmitting","setIsSubmitting","submitStatus","setSubmitStatus","submitMessage","setSubmitMessage","handleSubmit","selectedFile","setTimeout","window","location","reload","error","Error","message","getButtonVariant","getButtonIcon","className","getButtonText","isDisabled","diffs","length","children","onClick","disabled","concat"],"sources":["/Users/krishnapagrut/Developer/hcli/frontend/src/components/SubmitButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Send, Loader, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';\nimport { useStore } from '../hooks/useStore';\n\nconst SubmitButton: React.FC = () => {\n  const { editor, repository, applyChanges } = useStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error' | 'warning'>('idle');\n  const [submitMessage, setSubmitMessage] = useState('');\n\n  const handleSubmit = async () => {\n    if (!repository.selectedFile) return;\n\n    setIsSubmitting(true);\n    setSubmitStatus('idle');\n    setSubmitMessage('Applying changes...');\n\n    try {\n      // Use the new applyChanges function from the store\n      await applyChanges(repository.selectedFile);\n      \n      setSubmitStatus('success');\n      setSubmitMessage('Changes applied successfully!');\n      \n      // Reload the file to show updated content\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    } catch (error) {\n      setSubmitStatus('error');\n      setSubmitMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const getButtonVariant = () => {\n    switch (submitStatus) {\n      case 'success':\n        return 'bg-green-600 hover:bg-green-700 text-white';\n      case 'error':\n        return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'warning':\n        return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n      default:\n        return 'bg-primary-600 hover:bg-primary-700 text-white';\n    }\n  };\n\n  const getButtonIcon = () => {\n    if (isSubmitting) {\n      return <Loader className=\"h-4 w-4 animate-spin\" />;\n    }\n    \n    switch (submitStatus) {\n      case 'success':\n        return <CheckCircle className=\"h-4 w-4\" />;\n      case 'error':\n        return <XCircle className=\"h-4 w-4\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4\" />;\n      default:\n        return <Send className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getButtonText = () => {\n    if (isSubmitting) return 'Applying Changes...';\n    \n    switch (submitStatus) {\n      case 'success':\n        return 'Changes Applied Successfully';\n      case 'error':\n        return 'Apply Changes';\n      case 'warning':\n        return 'Apply Changes';\n      default:\n        return 'Apply Changes';\n    }\n  };\n\n  const isDisabled = !repository.selectedFile || editor.diffs.length === 0 || isSubmitting;\n\n  return (\n    <div className=\"bg-white border-t border-neutral-200 px-4 py-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={handleSubmit}\n            disabled={isDisabled}\n            className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed ${getButtonVariant()}`}\n          >\n            {getButtonIcon()}\n            <span>{getButtonText()}</span>\n          </button>\n          \n          {editor.diffs.length > 0 && (\n            <span className=\"text-sm text-neutral-600\">\n              {editor.diffs.length} change{editor.diffs.length !== 1 ? 's' : ''} pending\n            </span>\n          )}\n        </div>\n        \n        {submitMessage && (\n          <div className={`text-sm px-3 py-1 rounded-md ${\n            submitStatus === 'success' ? 'bg-green-50 text-green-700' :\n            submitStatus === 'error' ? 'bg-red-50 text-red-700' :\n            submitStatus === 'warning' ? 'bg-yellow-50 text-yellow-700' :\n            'bg-neutral-50 text-neutral-700'\n          }`}>\n            {submitMessage}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SubmitButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}