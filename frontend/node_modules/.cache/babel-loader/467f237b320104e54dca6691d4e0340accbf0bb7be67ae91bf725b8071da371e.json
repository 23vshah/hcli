{"ast":null,"code":"import React,{useState}from'react';import{Send,Loader,CheckCircle,XCircle,AlertTriangle}from'lucide-react';import{useStore}from'../hooks/useStore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubmitButton=()=>{const{editor,repository,setLoading,setError,clearDiffs}=useStore();const[isSubmitting,setIsSubmitting]=useState(false);const[submitStatus,setSubmitStatus]=useState('idle');const[submitMessage,setSubmitMessage]=useState('');const handleSubmit=async()=>{if(!repository.selectedFile||editor.diffs.length===0)return;setIsSubmitting(true);setSubmitStatus('idle');setSubmitMessage('Applying changes...');try{// Call backend to apply changes\nconst response=await fetch('/api/apply-changes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({pyh_content:editor.pyhContent,original_py_path:repository.selectedFile,diffs:editor.diffs})});if(!response.ok){throw new Error('Failed to apply changes');}const result=await response.json();if(result.success){setSubmitStatus('success');setSubmitMessage('Changes applied successfully! All tests passed.');clearDiffs();// Reload the file to show updated content\nsetTimeout(()=>{if(repository.selectedFile){// This will trigger a reload of the file content\nwindow.location.reload();}},2000);}else{setSubmitStatus('error');setSubmitMessage(result.error||'Failed to apply changes');}}catch(error){setSubmitStatus('error');setSubmitMessage(error instanceof Error?error.message:'Unknown error occurred');}finally{setIsSubmitting(false);}};const getButtonVariant=()=>{switch(submitStatus){case'success':return'bg-green-600 hover:bg-green-700 text-white';case'error':return'bg-red-600 hover:bg-red-700 text-white';case'warning':return'bg-yellow-600 hover:bg-yellow-700 text-white';default:return'bg-primary-600 hover:bg-primary-700 text-white';}};const getButtonIcon=()=>{if(isSubmitting){return/*#__PURE__*/_jsx(Loader,{className:\"h-4 w-4 animate-spin\"});}switch(submitStatus){case'success':return/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4\"});case'error':return/*#__PURE__*/_jsx(XCircle,{className:\"h-4 w-4\"});case'warning':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4\"});default:return/*#__PURE__*/_jsx(Send,{className:\"h-4 w-4\"});}};const getButtonText=()=>{if(isSubmitting)return'Applying Changes...';switch(submitStatus){case'success':return'Changes Applied Successfully';case'error':return'Apply Changes';case'warning':return'Apply Changes';default:return'Apply Changes';}};const isDisabled=!repository.selectedFile||editor.diffs.length===0||isSubmitting;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-t border-neutral-200 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,disabled:isDisabled,className:\"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed \".concat(getButtonVariant()),children:[getButtonIcon(),/*#__PURE__*/_jsx(\"span\",{children:getButtonText()})]}),editor.diffs.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-neutral-600\",children:[editor.diffs.length,\" change\",editor.diffs.length!==1?'s':'',\" pending\"]})]}),submitMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm px-3 py-1 rounded-md \".concat(submitStatus==='success'?'bg-green-50 text-green-700':submitStatus==='error'?'bg-red-50 text-red-700':submitStatus==='warning'?'bg-yellow-50 text-yellow-700':'bg-neutral-50 text-neutral-700'),children:submitMessage})]})});};export default SubmitButton;","map":{"version":3,"names":["React","useState","Send","Loader","CheckCircle","XCircle","AlertTriangle","useStore","jsx","_jsx","jsxs","_jsxs","SubmitButton","editor","repository","setLoading","setError","clearDiffs","isSubmitting","setIsSubmitting","submitStatus","setSubmitStatus","submitMessage","setSubmitMessage","handleSubmit","selectedFile","diffs","length","response","fetch","method","headers","body","JSON","stringify","pyh_content","pyhContent","original_py_path","ok","Error","result","json","success","setTimeout","window","location","reload","error","message","getButtonVariant","getButtonIcon","className","getButtonText","isDisabled","children","onClick","disabled","concat"],"sources":["/Users/krishnapagrut/Developer/hcli/frontend/src/components/SubmitButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Send, Loader, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';\nimport { useStore } from '../hooks/useStore';\n\nconst SubmitButton: React.FC = () => {\n  const { editor, repository, setLoading, setError, clearDiffs } = useStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error' | 'warning'>('idle');\n  const [submitMessage, setSubmitMessage] = useState('');\n\n  const handleSubmit = async () => {\n    if (!repository.selectedFile || editor.diffs.length === 0) return;\n\n    setIsSubmitting(true);\n    setSubmitStatus('idle');\n    setSubmitMessage('Applying changes...');\n\n    try {\n      // Call backend to apply changes\n      const response = await fetch('/api/apply-changes', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          pyh_content: editor.pyhContent,\n          original_py_path: repository.selectedFile,\n          diffs: editor.diffs,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to apply changes');\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        setSubmitStatus('success');\n        setSubmitMessage('Changes applied successfully! All tests passed.');\n        clearDiffs();\n        \n        // Reload the file to show updated content\n        setTimeout(() => {\n          if (repository.selectedFile) {\n            // This will trigger a reload of the file content\n            window.location.reload();\n          }\n        }, 2000);\n      } else {\n        setSubmitStatus('error');\n        setSubmitMessage(result.error || 'Failed to apply changes');\n      }\n    } catch (error) {\n      setSubmitStatus('error');\n      setSubmitMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const getButtonVariant = () => {\n    switch (submitStatus) {\n      case 'success':\n        return 'bg-green-600 hover:bg-green-700 text-white';\n      case 'error':\n        return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'warning':\n        return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n      default:\n        return 'bg-primary-600 hover:bg-primary-700 text-white';\n    }\n  };\n\n  const getButtonIcon = () => {\n    if (isSubmitting) {\n      return <Loader className=\"h-4 w-4 animate-spin\" />;\n    }\n    \n    switch (submitStatus) {\n      case 'success':\n        return <CheckCircle className=\"h-4 w-4\" />;\n      case 'error':\n        return <XCircle className=\"h-4 w-4\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4\" />;\n      default:\n        return <Send className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getButtonText = () => {\n    if (isSubmitting) return 'Applying Changes...';\n    \n    switch (submitStatus) {\n      case 'success':\n        return 'Changes Applied Successfully';\n      case 'error':\n        return 'Apply Changes';\n      case 'warning':\n        return 'Apply Changes';\n      default:\n        return 'Apply Changes';\n    }\n  };\n\n  const isDisabled = !repository.selectedFile || editor.diffs.length === 0 || isSubmitting;\n\n  return (\n    <div className=\"bg-white border-t border-neutral-200 px-4 py-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={handleSubmit}\n            disabled={isDisabled}\n            className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed ${getButtonVariant()}`}\n          >\n            {getButtonIcon()}\n            <span>{getButtonText()}</span>\n          </button>\n          \n          {editor.diffs.length > 0 && (\n            <span className=\"text-sm text-neutral-600\">\n              {editor.diffs.length} change{editor.diffs.length !== 1 ? 's' : ''} pending\n            </span>\n          )}\n        </div>\n        \n        {submitMessage && (\n          <div className={`text-sm px-3 py-1 rounded-md ${\n            submitStatus === 'success' ? 'bg-green-50 text-green-700' :\n            submitStatus === 'error' ? 'bg-red-50 text-red-700' :\n            submitStatus === 'warning' ? 'bg-yellow-50 text-yellow-700' :\n            'bg-neutral-50 text-neutral-700'\n          }`}>\n            {submitMessage}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SubmitButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}