{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ChevronRight,ChevronDown,File,Folder,FolderOpen,FileCode,Loader}from'lucide-react';import{useStore}from'../hooks/useStore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileExplorer=_ref=>{let{onFileSelect}=_ref;const[expandedNodes,setExpandedNodes]=useState(new Set());const[selectedFile,setSelectedFile]=useState(null);const{repository,isLoading,error,loadFiles}=useStore();const files=repository.files;// Update selected file when repository changes\nuseEffect(()=>{if(repository.selectedFile){setSelectedFile(repository.selectedFile);}},[repository.selectedFile]);// Load files when directory changes\nuseEffect(()=>{if(repository.currentDirectory){loadFiles(repository.currentDirectory);}},[repository.currentDirectory,loadFiles]);const toggleNode=nodePath=>{const newExpanded=new Set(expandedNodes);if(newExpanded.has(nodePath)){newExpanded.delete(nodePath);}else{newExpanded.add(nodePath);}setExpandedNodes(newExpanded);};const handleFileClick=filePath=>{setSelectedFile(filePath);onFileSelect(filePath);};const getFileIcon=fileName=>{if(fileName.endsWith('.py')){return/*#__PURE__*/_jsx(FileCode,{className:\"h-4 w-4 text-blue-500\"});}else{return/*#__PURE__*/_jsx(File,{className:\"h-4 w-4 text-gray-500\"});}};const renderNode=function(node){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const isExpanded=expandedNodes.has(node.path);const isSelected=selectedFile===node.path;const hasChildren=node.children&&node.children.length>0;const isFolder=node.type==='directory';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center py-1 px-2 cursor-pointer hover:bg-gray-100 transition-colors \".concat(isSelected?'bg-blue-50 border-r-2 border-blue-500':''),style:{paddingLeft:\"\".concat(level*16+8,\"px\")},onClick:()=>{if(isFolder){toggleNode(node.path);}else{handleFileClick(node.path);}},children:[isFolder&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-1\",children:isExpanded?/*#__PURE__*/_jsx(ChevronDown,{className:\"h-3 w-3 text-gray-500\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"h-3 w-3 text-gray-500\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr-2\",children:isFolder?isExpanded?/*#__PURE__*/_jsx(FolderOpen,{className:\"h-4 w-4 text-blue-500\"}):/*#__PURE__*/_jsx(Folder,{className:\"h-4 w-4 text-blue-500\"}):getFileIcon(node.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm truncate \".concat(isSelected?'text-blue-700 font-medium':isFolder?'font-bold text-gray-800':'text-gray-700'),children:node.name})]}),isFolder&&isExpanded&&hasChildren&&/*#__PURE__*/_jsx(\"div\",{children:node.children.map(child=>renderNode(child,level+1))})]},node.path);};return/*#__PURE__*/_jsx(\"div\",{className:\"w-64 bg-gray-50 border-r border-gray-300 h-full overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-800 mb-2\",children:\"Files\"}),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-8\",children:[/*#__PURE__*/_jsx(Loader,{className:\"h-6 w-6 animate-spin text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:\"Loading files...\"})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-2 text-xs text-blue-500 hover:underline\",children:\"Retry\"})]}):files.length>0?files.map(node=>renderNode(node)):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-sm text-gray-500\",children:\"No files found. Select a directory and click \\\"Crawl\\\" to load files.\"})]})});};export default FileExplorer;","map":{"version":3,"names":["React","useState","useEffect","ChevronRight","ChevronDown","File","Folder","FolderOpen","FileCode","Loader","useStore","jsx","_jsx","jsxs","_jsxs","FileExplorer","_ref","onFileSelect","expandedNodes","setExpandedNodes","Set","selectedFile","setSelectedFile","repository","isLoading","error","loadFiles","files","currentDirectory","toggleNode","nodePath","newExpanded","has","delete","add","handleFileClick","filePath","getFileIcon","fileName","endsWith","className","renderNode","node","level","arguments","length","undefined","isExpanded","path","isSelected","hasChildren","children","isFolder","type","concat","style","paddingLeft","onClick","name","map","child","window","location","reload"],"sources":["/Users/krishnapagrut/Developer/hcli/frontend/src/components/FileExplorer.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  ChevronRight, \n  ChevronDown, \n  File, \n  Folder, \n  FolderOpen,\n  FileCode,\n  Loader\n} from 'lucide-react';\nimport { useStore } from '../hooks/useStore';\n\ninterface FileExplorerProps {\n  onFileSelect: (filePath: string) => void;\n}\n\ninterface FileNode {\n  name: string;\n  type: 'file' | 'directory';\n  path: string;\n  children?: FileNode[];\n}\n\nconst FileExplorer: React.FC<FileExplorerProps> = ({ onFileSelect }) => {\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\n  const { repository, isLoading, error, loadFiles } = useStore();\n  const files = repository.files;\n\n  // Update selected file when repository changes\n  useEffect(() => {\n    if (repository.selectedFile) {\n      setSelectedFile(repository.selectedFile);\n    }\n  }, [repository.selectedFile]);\n\n  // Load files when directory changes\n  useEffect(() => {\n    if (repository.currentDirectory) {\n      loadFiles(repository.currentDirectory);\n    }\n  }, [repository.currentDirectory, loadFiles]);\n\n  const toggleNode = (nodePath: string) => {\n    const newExpanded = new Set(expandedNodes);\n    if (newExpanded.has(nodePath)) {\n      newExpanded.delete(nodePath);\n    } else {\n      newExpanded.add(nodePath);\n    }\n    setExpandedNodes(newExpanded);\n  };\n\n  const handleFileClick = (filePath: string) => {\n    setSelectedFile(filePath);\n    onFileSelect(filePath);\n  };\n\n  const getFileIcon = (fileName: string) => {\n    if (fileName.endsWith('.py')) {\n      return <FileCode className=\"h-4 w-4 text-blue-500\" />;\n    } else {\n      return <File className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const renderNode = (node: FileNode, level: number = 0): React.ReactNode => {\n    const isExpanded = expandedNodes.has(node.path);\n    const isSelected = selectedFile === node.path;\n    const hasChildren = node.children && node.children.length > 0;\n    const isFolder = node.type === 'directory';\n\n    return (\n      <div key={node.path}>\n        <div\n          className={`flex items-center py-1 px-2 cursor-pointer hover:bg-gray-100 transition-colors ${\n            isSelected ? 'bg-blue-50 border-r-2 border-blue-500' : ''\n          }`}\n          style={{ paddingLeft: `${level * 16 + 8}px` }}\n          onClick={() => {\n            if (isFolder) {\n              toggleNode(node.path);\n            } else {\n              handleFileClick(node.path);\n            }\n          }}\n        >\n          {isFolder && (\n            <div className=\"mr-1\">\n              {isExpanded ? (\n                <ChevronDown className=\"h-3 w-3 text-gray-500\" />\n              ) : (\n                <ChevronRight className=\"h-3 w-3 text-gray-500\" />\n              )}\n            </div>\n          )}\n          \n          <div className=\"mr-2\">\n            {isFolder ? (\n              isExpanded ? (\n                <FolderOpen className=\"h-4 w-4 text-blue-500\" />\n              ) : (\n                <Folder className=\"h-4 w-4 text-blue-500\" />\n              )\n            ) : (\n              getFileIcon(node.name)\n            )}\n          </div>\n          \n          <span className={`text-sm truncate ${\n            isSelected ? 'text-blue-700 font-medium' : isFolder ? 'font-bold text-gray-800' : 'text-gray-700'\n          }`}>\n            {node.name}\n          </span>\n        </div>\n        \n        {isFolder && isExpanded && hasChildren && (\n          <div>\n            {node.children!.map(child => renderNode(child, level + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-64 bg-gray-50 border-r border-gray-300 h-full overflow-y-auto\">\n      <div className=\"p-3\">\n        <h3 className=\"text-sm font-semibold text-gray-800 mb-2\">Files</h3>\n        \n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader className=\"h-6 w-6 animate-spin text-gray-500\" />\n            <span className=\"ml-2 text-sm text-gray-500\">Loading files...</span>\n          </div>\n        ) : error ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-red-500 text-sm\">{error}</div>\n            <button \n              onClick={() => window.location.reload()} \n              className=\"mt-2 text-xs text-blue-500 hover:underline\"\n            >\n              Retry\n            </button>\n          </div>\n        ) : files.length > 0 ? (\n          files.map(node => renderNode(node))\n        ) : (\n          <div className=\"text-center py-8 text-sm text-gray-500\">\n            No files found. Select a directory and click \"Crawl\" to load files.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FileExplorer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}