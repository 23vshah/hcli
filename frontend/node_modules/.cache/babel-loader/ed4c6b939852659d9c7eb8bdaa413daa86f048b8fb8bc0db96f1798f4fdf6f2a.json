{"ast":null,"code":"var _jsxFileName = \"/Users/krishnapagrut/Developer/hcli/frontend/src/components/SubmitButton.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Send, Loader, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';\nimport { useStore } from '../hooks/useStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubmitButton = () => {\n  _s();\n  const {\n    editor,\n    repository,\n    setLoading,\n    setError,\n    clearDiffs\n  } = useStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState('idle');\n  const [submitMessage, setSubmitMessage] = useState('');\n  const handleSubmit = async () => {\n    if (!repository.selectedFile || editor.diffs.length === 0) return;\n    setIsSubmitting(true);\n    setSubmitStatus('idle');\n    setSubmitMessage('Applying changes...');\n    try {\n      // Call backend to apply changes\n      const response = await fetch('/api/apply-changes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          pyh_content: editor.pyhContent,\n          original_py_path: repository.selectedFile,\n          diffs: editor.diffs\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to apply changes');\n      }\n      const result = await response.json();\n      if (result.success) {\n        setSubmitStatus('success');\n        setSubmitMessage('Changes applied successfully! All tests passed.');\n        clearDiffs();\n\n        // Reload the file to show updated content\n        setTimeout(() => {\n          if (repository.selectedFile) {\n            // This will trigger a reload of the file content\n            window.location.reload();\n          }\n        }, 2000);\n      } else {\n        setSubmitStatus('error');\n        setSubmitMessage(result.error || 'Failed to apply changes');\n      }\n    } catch (error) {\n      setSubmitStatus('error');\n      setSubmitMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const getButtonVariant = () => {\n    switch (submitStatus) {\n      case 'success':\n        return 'bg-green-600 hover:bg-green-700 text-white';\n      case 'error':\n        return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'warning':\n        return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n      default:\n        return 'bg-primary-600 hover:bg-primary-700 text-white';\n    }\n  };\n  const getButtonIcon = () => {\n    if (isSubmitting) {\n      return /*#__PURE__*/_jsxDEV(Loader, {\n        className: \"h-4 w-4 animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 14\n      }, this);\n    }\n    switch (submitStatus) {\n      case 'success':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 16\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }, this);\n      case 'warning':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Send, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getButtonText = () => {\n    if (isSubmitting) return 'Applying Changes...';\n    switch (submitStatus) {\n      case 'success':\n        return 'Changes Applied Successfully';\n      case 'error':\n        return 'Apply Changes';\n      case 'warning':\n        return 'Apply Changes';\n      default:\n        return 'Apply Changes';\n    }\n  };\n  const isDisabled = !repository.selectedFile || editor.diffs.length === 0 || isSubmitting;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white border-t border-neutral-200 px-4 py-3\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          disabled: isDisabled,\n          className: `flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed ${getButtonVariant()}`,\n          children: [getButtonIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: getButtonText()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), editor.diffs.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-neutral-600\",\n          children: [editor.diffs.length, \" change\", editor.diffs.length !== 1 ? 's' : '', \" pending\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), submitMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `text-sm px-3 py-1 rounded-md ${submitStatus === 'success' ? 'bg-green-50 text-green-700' : submitStatus === 'error' ? 'bg-red-50 text-red-700' : submitStatus === 'warning' ? 'bg-yellow-50 text-yellow-700' : 'bg-neutral-50 text-neutral-700'}`,\n        children: submitMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n_s(SubmitButton, \"tAii548Vx6h75QaRyCBnVGUn0ow=\", false, function () {\n  return [useStore];\n});\n_c = SubmitButton;\nexport default SubmitButton;\nvar _c;\n$RefreshReg$(_c, \"SubmitButton\");","map":{"version":3,"names":["React","useState","Send","Loader","CheckCircle","XCircle","AlertTriangle","useStore","jsxDEV","_jsxDEV","SubmitButton","_s","editor","repository","setLoading","setError","clearDiffs","isSubmitting","setIsSubmitting","submitStatus","setSubmitStatus","submitMessage","setSubmitMessage","handleSubmit","selectedFile","diffs","length","response","fetch","method","headers","body","JSON","stringify","pyh_content","pyhContent","original_py_path","ok","Error","result","json","success","setTimeout","window","location","reload","error","message","getButtonVariant","getButtonIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getButtonText","isDisabled","children","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/krishnapagrut/Developer/hcli/frontend/src/components/SubmitButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Send, Loader, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';\nimport { useStore } from '../hooks/useStore';\n\nconst SubmitButton: React.FC = () => {\n  const { editor, repository, setLoading, setError, clearDiffs } = useStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error' | 'warning'>('idle');\n  const [submitMessage, setSubmitMessage] = useState('');\n\n  const handleSubmit = async () => {\n    if (!repository.selectedFile || editor.diffs.length === 0) return;\n\n    setIsSubmitting(true);\n    setSubmitStatus('idle');\n    setSubmitMessage('Applying changes...');\n\n    try {\n      // Call backend to apply changes\n      const response = await fetch('/api/apply-changes', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          pyh_content: editor.pyhContent,\n          original_py_path: repository.selectedFile,\n          diffs: editor.diffs,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to apply changes');\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        setSubmitStatus('success');\n        setSubmitMessage('Changes applied successfully! All tests passed.');\n        clearDiffs();\n        \n        // Reload the file to show updated content\n        setTimeout(() => {\n          if (repository.selectedFile) {\n            // This will trigger a reload of the file content\n            window.location.reload();\n          }\n        }, 2000);\n      } else {\n        setSubmitStatus('error');\n        setSubmitMessage(result.error || 'Failed to apply changes');\n      }\n    } catch (error) {\n      setSubmitStatus('error');\n      setSubmitMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const getButtonVariant = () => {\n    switch (submitStatus) {\n      case 'success':\n        return 'bg-green-600 hover:bg-green-700 text-white';\n      case 'error':\n        return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'warning':\n        return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n      default:\n        return 'bg-primary-600 hover:bg-primary-700 text-white';\n    }\n  };\n\n  const getButtonIcon = () => {\n    if (isSubmitting) {\n      return <Loader className=\"h-4 w-4 animate-spin\" />;\n    }\n    \n    switch (submitStatus) {\n      case 'success':\n        return <CheckCircle className=\"h-4 w-4\" />;\n      case 'error':\n        return <XCircle className=\"h-4 w-4\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4\" />;\n      default:\n        return <Send className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getButtonText = () => {\n    if (isSubmitting) return 'Applying Changes...';\n    \n    switch (submitStatus) {\n      case 'success':\n        return 'Changes Applied Successfully';\n      case 'error':\n        return 'Apply Changes';\n      case 'warning':\n        return 'Apply Changes';\n      default:\n        return 'Apply Changes';\n    }\n  };\n\n  const isDisabled = !repository.selectedFile || editor.diffs.length === 0 || isSubmitting;\n\n  return (\n    <div className=\"bg-white border-t border-neutral-200 px-4 py-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={handleSubmit}\n            disabled={isDisabled}\n            className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed ${getButtonVariant()}`}\n          >\n            {getButtonIcon()}\n            <span>{getButtonText()}</span>\n          </button>\n          \n          {editor.diffs.length > 0 && (\n            <span className=\"text-sm text-neutral-600\">\n              {editor.diffs.length} change{editor.diffs.length !== 1 ? 's' : ''} pending\n            </span>\n          )}\n        </div>\n        \n        {submitMessage && (\n          <div className={`text-sm px-3 py-1 rounded-md ${\n            submitStatus === 'success' ? 'bg-green-50 text-green-700' :\n            submitStatus === 'error' ? 'bg-red-50 text-red-700' :\n            submitStatus === 'warning' ? 'bg-yellow-50 text-yellow-700' :\n            'bg-neutral-50 text-neutral-700'\n          }`}>\n            {submitMessage}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SubmitButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}