{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ChevronRight,ChevronDown,File,Folder,FolderOpen,FileCode,Loader}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileExplorer=_ref=>{let{onFileSelect}=_ref;const[expandedNodes,setExpandedNodes]=useState(new Set());const[selectedFile,setSelectedFile]=useState(null);const[files,setFiles]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Fetch files from backend API\nuseEffect(()=>{const fetchFiles=async()=>{try{setLoading(true);const response=await fetch('/api/files');if(!response.ok){throw new Error('Failed to fetch files');}const data=await response.json();setFiles(data.files||[]);setError(null);}catch(err){setError(err instanceof Error?err.message:'Failed to load files');console.error('Error fetching files:',err);}finally{setLoading(false);}};fetchFiles();},[]);const toggleNode=nodePath=>{const newExpanded=new Set(expandedNodes);if(newExpanded.has(nodePath)){newExpanded.delete(nodePath);}else{newExpanded.add(nodePath);}setExpandedNodes(newExpanded);};const handleFileClick=filePath=>{setSelectedFile(filePath);onFileSelect(filePath);};const getFileIcon=fileName=>{if(fileName.endsWith('.py')){return/*#__PURE__*/_jsx(FileCode,{className:\"h-4 w-4 text-blue-500\"});}else{return/*#__PURE__*/_jsx(File,{className:\"h-4 w-4 text-gray-500\"});}};const renderNode=function(node){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const isExpanded=expandedNodes.has(node.path);const isSelected=selectedFile===node.path;const hasChildren=node.children&&node.children.length>0;const isFolder=node.type==='directory';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center py-1 px-2 cursor-pointer hover:bg-gray-100 transition-colors \".concat(isSelected?'bg-blue-50 border-r-2 border-blue-500':''),style:{paddingLeft:\"\".concat(level*16+8,\"px\")},onClick:()=>{if(isFolder){toggleNode(node.path);}else{handleFileClick(node.path);}},children:[isFolder&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-1\",children:isExpanded?/*#__PURE__*/_jsx(ChevronDown,{className:\"h-3 w-3 text-gray-500\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"h-3 w-3 text-gray-500\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr-2\",children:isFolder?isExpanded?/*#__PURE__*/_jsx(FolderOpen,{className:\"h-4 w-4 text-blue-500\"}):/*#__PURE__*/_jsx(Folder,{className:\"h-4 w-4 text-blue-500\"}):getFileIcon(node.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm truncate \".concat(isSelected?'text-blue-700 font-medium':isFolder?'font-bold text-gray-800':'text-gray-700'),children:node.name})]}),isFolder&&isExpanded&&hasChildren&&/*#__PURE__*/_jsx(\"div\",{children:node.children.map(child=>renderNode(child,level+1))})]},node.path);};return/*#__PURE__*/_jsx(\"div\",{className:\"w-64 bg-gray-50 border-r border-gray-300 h-full overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-800 mb-2\",children:\"Files\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-8\",children:[/*#__PURE__*/_jsx(Loader,{className:\"h-6 w-6 animate-spin text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:\"Loading files...\"})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-2 text-xs text-blue-500 hover:underline\",children:\"Retry\"})]}):files.length>0?files.map(node=>renderNode(node)):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-sm text-gray-500\",children:\"No files found\"})]})});};export default FileExplorer;","map":{"version":3,"names":["React","useState","useEffect","ChevronRight","ChevronDown","File","Folder","FolderOpen","FileCode","Loader","jsx","_jsx","jsxs","_jsxs","FileExplorer","_ref","onFileSelect","expandedNodes","setExpandedNodes","Set","selectedFile","setSelectedFile","files","setFiles","loading","setLoading","error","setError","fetchFiles","response","fetch","ok","Error","data","json","err","message","console","toggleNode","nodePath","newExpanded","has","delete","add","handleFileClick","filePath","getFileIcon","fileName","endsWith","className","renderNode","node","level","arguments","length","undefined","isExpanded","path","isSelected","hasChildren","children","isFolder","type","concat","style","paddingLeft","onClick","name","map","child","window","location","reload"],"sources":["/Users/krishnapagrut/Developer/hcli/frontend/src/components/FileExplorer.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  ChevronRight, \n  ChevronDown, \n  File, \n  Folder, \n  FolderOpen,\n  FileCode,\n  Loader\n} from 'lucide-react';\n\ninterface FileExplorerProps {\n  onFileSelect: (filePath: string) => void;\n}\n\ninterface FileNode {\n  name: string;\n  type: 'file' | 'directory';\n  path: string;\n  children?: FileNode[];\n}\n\nconst FileExplorer: React.FC<FileExplorerProps> = ({ onFileSelect }) => {\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\n  const [files, setFiles] = useState<FileNode[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch files from backend API\n  useEffect(() => {\n    const fetchFiles = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch('/api/files');\n        if (!response.ok) {\n          throw new Error('Failed to fetch files');\n        }\n        const data = await response.json();\n        setFiles(data.files || []);\n        setError(null);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load files');\n        console.error('Error fetching files:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchFiles();\n  }, []);\n\n  const toggleNode = (nodePath: string) => {\n    const newExpanded = new Set(expandedNodes);\n    if (newExpanded.has(nodePath)) {\n      newExpanded.delete(nodePath);\n    } else {\n      newExpanded.add(nodePath);\n    }\n    setExpandedNodes(newExpanded);\n  };\n\n  const handleFileClick = (filePath: string) => {\n    setSelectedFile(filePath);\n    onFileSelect(filePath);\n  };\n\n  const getFileIcon = (fileName: string) => {\n    if (fileName.endsWith('.py')) {\n      return <FileCode className=\"h-4 w-4 text-blue-500\" />;\n    } else {\n      return <File className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const renderNode = (node: FileNode, level: number = 0): React.ReactNode => {\n    const isExpanded = expandedNodes.has(node.path);\n    const isSelected = selectedFile === node.path;\n    const hasChildren = node.children && node.children.length > 0;\n    const isFolder = node.type === 'directory';\n\n    return (\n      <div key={node.path}>\n        <div\n          className={`flex items-center py-1 px-2 cursor-pointer hover:bg-gray-100 transition-colors ${\n            isSelected ? 'bg-blue-50 border-r-2 border-blue-500' : ''\n          }`}\n          style={{ paddingLeft: `${level * 16 + 8}px` }}\n          onClick={() => {\n            if (isFolder) {\n              toggleNode(node.path);\n            } else {\n              handleFileClick(node.path);\n            }\n          }}\n        >\n          {isFolder && (\n            <div className=\"mr-1\">\n              {isExpanded ? (\n                <ChevronDown className=\"h-3 w-3 text-gray-500\" />\n              ) : (\n                <ChevronRight className=\"h-3 w-3 text-gray-500\" />\n              )}\n            </div>\n          )}\n          \n          <div className=\"mr-2\">\n            {isFolder ? (\n              isExpanded ? (\n                <FolderOpen className=\"h-4 w-4 text-blue-500\" />\n              ) : (\n                <Folder className=\"h-4 w-4 text-blue-500\" />\n              )\n            ) : (\n              getFileIcon(node.name)\n            )}\n          </div>\n          \n          <span className={`text-sm truncate ${\n            isSelected ? 'text-blue-700 font-medium' : isFolder ? 'font-bold text-gray-800' : 'text-gray-700'\n          }`}>\n            {node.name}\n          </span>\n        </div>\n        \n        {isFolder && isExpanded && hasChildren && (\n          <div>\n            {node.children!.map(child => renderNode(child, level + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-64 bg-gray-50 border-r border-gray-300 h-full overflow-y-auto\">\n      <div className=\"p-3\">\n        <h3 className=\"text-sm font-semibold text-gray-800 mb-2\">Files</h3>\n        \n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader className=\"h-6 w-6 animate-spin text-gray-500\" />\n            <span className=\"ml-2 text-sm text-gray-500\">Loading files...</span>\n          </div>\n        ) : error ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-red-500 text-sm\">{error}</div>\n            <button \n              onClick={() => window.location.reload()} \n              className=\"mt-2 text-xs text-blue-500 hover:underline\"\n            >\n              Retry\n            </button>\n          </div>\n        ) : files.length > 0 ? (\n          files.map(node => renderNode(node))\n        ) : (\n          <div className=\"text-center py-8 text-sm text-gray-500\">\n            No files found\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FileExplorer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}